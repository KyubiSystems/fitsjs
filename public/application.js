((function(){if(!this.require){var a={},b={},c=function(f,g){var h=d(g,f),i=d(h,"./index"),j,k;j=b[h]||b[i];if(j)return j;if(k=a[h]||a[h=i])return j={id:h,exports:{}},b[h]=j.exports,k(j.exports,function(a){return c(a,e(h))},j),b[h]=j.exports;throw"module "+f+" not found"},d=function(a,b){var c=[],d,e;/^\.\.?(\/|$)/.test(b)?d=[a,b].join("/").split("/"):d=b.split("/");for(var f=0,g=d.length;f<g;f++)e=d[f],e==".."?c.pop():e!="."&&e!=""&&c.push(e);return c.join("/")},e=function(a){return a.split("/").slice(0,-1).join("/")};this.require=function(a){return c(a,"")},this.require.define=function(b){for(var c in b)a[c]=b[c]},this.require.modules=a,this.require.cache=b}return this.require.define})).call(this)({"jDataView/src/jdataview":function(a,b,c){(function(a){var b={ArrayBuffer:typeof ArrayBuffer!="undefined",DataView:typeof DataView!="undefined"&&"getFloat64"in DataView.prototype,NodeBuffer:typeof Buffer!="undefined",NodeBufferFull:typeof Buffer!="undefined"&&"readInt8LE"in Buffer,NodeBufferEndian:typeof Buffer!="undefined"&&"readInt8"in Buffer},d=function(a,c,d,e){if(!(this instanceof arguments.callee))throw new Error("jDataView constructor may not be called as a function");this.buffer=a;if(!(b.NodeBuffer&&a instanceof Buffer)&&!(b.ArrayBuffer&&a instanceof ArrayBuffer)&&typeof a!="string")throw new TypeError("jDataView buffer has an incompatible type");this._isArrayBuffer=b.ArrayBuffer&&a instanceof ArrayBuffer,this._isDataView=b.DataView&&this._isArrayBuffer,this._isNodeBuffer=b.NodeBuffer&&a instanceof Buffer,this._littleEndian=e===undefined?!0:e;var f=this._isArrayBuffer?a.byteLength:a.length;c===undefined&&(c=0),this.byteOffset=c,d===undefined&&(d=f-c),this.byteLength=d;if(!this._isDataView){if(typeof c!="number")throw new TypeError("jDataView byteOffset is not a number");if(typeof d!="number")throw new TypeError("jDataView byteLength is not a number");if(typeof c<0)throw new Error("jDataView byteOffset is negative");if(typeof d<0)throw new Error("jDataView byteLength is negative")}this._isDataView&&(this._view=new DataView(a,c,d),this._start=0),this._start=c;if(c+d>f)throw new Error("jDataView (byteOffset+byteLength) value is out of bounds");this._offset=0};d.createBuffer=function(){if(b.NodeBuffer){var a=new Buffer(arguments.length);for(var c=0;c<arguments.length;++c)a[c]=arguments[c];return a}if(b.ArrayBuffer){var a=new ArrayBuffer(arguments.length),d=new Int8Array(a);for(var c=0;c<arguments.length;++c)d[c]=arguments[c];return a}return String.fromCharCode.apply(null,arguments)},d.prototype={getString:function(a,b){var c;b===undefined&&(b=this._offset);if(typeof b!="number")throw new TypeError("jDataView byteOffset is not a number");if(a<0||b+a>this.byteLength)throw new Error("jDataView length or (byteOffset+length) value is out of bounds");if(this._isNodeBuffer)c=this.buffer.toString("ascii",this._start+b,this._start+b+a);else{c="";for(var d=0;d<a;++d){var e=this.getUint8(b+d);c+=String.fromCharCode(e>127?65533:e)}}return this._offset=b+a,c},getChar:function(a){return this.getString(1,a)},tell:function(){return this._offset},seek:function(a){if(typeof a!="number")throw new TypeError("jDataView byteOffset is not a number");if(a<0||a>this.byteLength)throw new Error("jDataView byteOffset value is out of bounds");return this._offset=a},_endianness:function(a,b,c,d){return a+(d?c-b-1:b)},_getFloat64:function(a,b){var c=this._getUint8(this._endianness(a,0,8,b)),d=this._getUint8(this._endianness(a,1,8,b)),e=this._getUint8(this._endianness(a,2,8,b)),f=this._getUint8(this._endianness(a,3,8,b)),g=this._getUint8(this._endianness(a,4,8,b)),h=this._getUint8(this._endianness(a,5,8,b)),i=this._getUint8(this._endianness(a,6,8,b)),j=this._getUint8(this._endianness(a,7,8,b)),k=1-2*(c>>7),l=((c<<1&255)<<3|d>>4)-(Math.pow(2,10)-1),m=(d&15)*Math.pow(2,48)+e*Math.pow(2,40)+f*Math.pow(2,32)+g*Math.pow(2,24)+h*Math.pow(2,16)+i*Math.pow(2,8)+j;return l===1024?m!==0?NaN:k*Infinity:l===-1023?k*m*Math.pow(2,-1074):k*(1+m*Math.pow(2,-52))*Math.pow(2,l)},_getFloat32:function(a,b){var c=this._getUint8(this._endianness(a,0,4,b)),d=this._getUint8(this._endianness(a,1,4,b)),e=this._getUint8(this._endianness(a,2,4,b)),f=this._getUint8(this._endianness(a,3,4,b)),g=1-2*(c>>7),h=(c<<1&255|d>>7)-127,i=(d&127)<<16|e<<8|f;return h===128?i!==0?NaN:g*Infinity:h===-127?g*i*Math.pow(2,-149):g*(1+i*Math.pow(2,-23))*Math.pow(2,h)},_getInt32:function(a,b){var c=this._getUint32(a,b);return c>Math.pow(2,31)-1?c-Math.pow(2,32):c},_getUint32:function(a,b){var c=this._getUint8(this._endianness(a,0,4,b)),d=this._getUint8(this._endianness(a,1,4,b)),e=this._getUint8(this._endianness(a,2,4,b)),f=this._getUint8(this._endianness(a,3,4,b));return c*Math.pow(2,24)+(d<<16)+(e<<8)+f},_getInt16:function(a,b){var c=this._getUint16(a,b);return c>Math.pow(2,15)-1?c-Math.pow(2,16):c},_getUint16:function(a,b){var c=this._getUint8(this._endianness(a,0,2,b)),d=this._getUint8(this._endianness(a,1,2,b));return(c<<8)+d},_getInt8:function(a){var b=this._getUint8(a);return b>Math.pow(2,7)-1?b-Math.pow(2,8):b},_getUint8:function(a){return this._isArrayBuffer?(new Uint8Array(this.buffer,a,1))[0]:this._isNodeBuffer?this.buffer[a]:this.buffer.charCodeAt(a)&255}};var e={Int8:1,Int16:2,Int32:4,Uint8:1,Uint16:2,Uint32:4,Float32:4,Float64:8},f={Int8:"Int8",Int16:"Int16",Int32:"Int32",Uint8:"UInt8",Uint16:"UInt16",Uint32:"UInt32",Float32:"Float",Float64:"Double"};for(var g in e){if(!e.hasOwnProperty(g))continue;(function(c){var g=e[c];d.prototype["get"+c]=function(d,e){var h;e===undefined&&(e=this._littleEndian),d===undefined&&(d=this._offset);if(this._isDataView)h=this._view["get"+c](d,e);else if(this._isArrayBuffer&&(this._start+d)%g===0&&(g===1||e))h=(new a[c+"Array"](this.buffer,this._start+d,1))[0];else if(this._isNodeBuffer&&b.NodeBufferFull)e?h=this.buffer["read"+f[c]+"LE"](this._start+d):h=this.buffer["read"+f[c]+"BE"](this._start+d);else if(this._isNodeBuffer&&b.NodeBufferEndian)h=this.buffer["read"+f[c]](this._start+d,e);else{if(typeof d!="number")throw new TypeError("jDataView byteOffset is not a number");if(d+g>this.byteLength)throw new Error("jDataView (byteOffset+size) value is out of bounds");h=this["_get"+c](this._start+d,e)}return this._offset=d+g,h}})(g)}if(typeof jQuery!="undefined"&&jQuery.fn.jquery>="1.6.2"){var h=function(a){var b;try{b=IEBinaryToArray_ByteStr(a)}catch(c){var d="Function IEBinaryToArray_ByteStr(Binary)\r\n\tIEBinaryToArray_ByteStr = CStr(Binary)\r\nEnd Function\r\nFunction IEBinaryToArray_ByteStr_Last(Binary)\r\n\tDim lastIndex\r\n\tlastIndex = LenB(Binary)\r\n\tif lastIndex mod 2 Then\r\n\t\tIEBinaryToArray_ByteStr_Last = AscB( MidB( Binary, lastIndex, 1 ) )\r\n\tElse\r\n\t\tIEBinaryToArray_ByteStr_Last = -1\r\n\tEnd If\r\nEnd Function\r\n";window.execScript(d,"vbscript"),b=IEBinaryToArray_ByteStr(a)}var e=IEBinaryToArray_ByteStr_Last(a),f="",g=0,h=b.length%8,i;while(g<h)i=b.charCodeAt(g++),f+=String.fromCharCode(i&255,i>>8);h=b.length;while(g<h)f+=String.fromCharCode((i=b.charCodeAt(g++),i&255),i>>8,(i=b.charCodeAt(g++),i&255),i>>8,(i=b.charCodeAt(g++),i&255),i>>8,(i=b.charCodeAt(g++),i&255),i>>8,(i=b.charCodeAt(g++),i&255),i>>8,(i=b.charCodeAt(g++),i&255),i>>8,(i=b.charCodeAt(g++),i&255),i>>8,(i=b.charCodeAt(g++),i&255),i>>8);return e>-1&&(f+=String.fromCharCode(e)),f};jQuery.ajaxSetup({converters:{"* dataview":function(a){return new d(a)}},accepts:{dataview:"text/plain; charset=x-user-defined"},responseHandler:{dataview:function(a,b,c){"mozResponseArrayBuffer"in c?a.text=c.mozResponseArrayBuffer:"responseType"in c&&c.responseType==="arraybuffer"&&c.response?a.text=c.response:"responseBody"in c?a.text=h(c.responseBody):a.text=c.responseText}}}),jQuery.ajaxPrefilter("dataview",function(a,b,c){jQuery.support.ajaxResponseType&&(a.hasOwnProperty("xhrFields")||(a.xhrFields={}),a.xhrFields.responseType="arraybuffer"),a.mimeType="text/plain; charset=x-user-defined"})}a.jDataView=(a.module||{}).exports=d,typeof c!="undefined"&&(c.exports=d)})(this)},"fits.bintable":function(a,b,c){((function(){})).call(this)},fits:function(a,b,c){((function(){var a,d,e,f,g,h,i,j,k,l,m,n,o=Array.prototype.indexOf||function(a){for(var b=0,c=this.length;b<c;b++)if(b in this&&this[b]===a)return b;return-1},p=Object.prototype.hasOwnProperty,q=function(a,b){function d(){this.constructor=a}for(var c in b)p.call(b,c)&&(a[c]=b[c]);return d.prototype=b.prototype,a.prototype=new d,a.__super__=b.prototype,a};b("jDataView/src/jdataview"),e=b("fits.decompress"),m=b("fits.header.verify"),n=["included","extended"],k=function(){function a(){}return a.include=function(a){var b,c,d;if(!a)throw"include(obj) requires obj";for(b in a)c=a[b],o.call(n,b)<0&&(this.prototype[b]=c);return(d=a.included)!=null&&d.apply(this),this},a.extend=function(a){var b,c,d;if(!a)throw"extend(obj) requires obj";for(b in a)c=a[b],o.call(n,b)<0&&(this[b]=c);return(d=a.extended)!=null&&d.apply(this),this},a.proxy=function(a){var b=this;return function(){return a.apply(b,arguments)}},a.prototype.proxy=function(a){var b=this;return function(){return a.apply(b,arguments)}},a}(),i=function(a){function b(){var a,b,c;this.verifyCard={},c=this.Functions;for(b in c)a=c[b],this.verifyCard[b]=this.proxy(a);this.cards={},this.cardIndex=0}return q(b,a),b.keywordPattern=/([\w_]+)\s*=?\s*(.*)/,b.nonStringPattern=/([^\/]*)\s*\/*(.*)/,b.stringPattern=/'(.*)'\s*\/*(.*)/,b.include(m),b.prototype.get=function(a){return this.cards.hasOwnProperty(a)?this.cards[a]:console.warn("Header does not contain the key "+a)},b.prototype.getIndex=function(a){return this.cards.hasOwnProperty(a)?this.cards[a][0]:console.warn("Header does not contain the key "+a)},b.prototype.getComment=function(a){return this.contains(a)?this.cards[a][2]!=null?this.cards[a][2]:console.warn(""+a+" does not contain a comment"):console.warn("Header does not contain the key "+a)},b.prototype.getComments=function(){return this.cards.hasOwnProperty(key)?this.cards.COMMENT:console.warn("Header does not contain any COMMENT fields")},b.prototype.getHistory=function(){return this.cards.hasOwnProperty(key)?this.cards.HISTORY:console.warn("Header does not contain any HISTORY fields")},b.prototype.set=function(a,b,c){return this.cards[a]=c?[this.cardIndex,b,c]:[this.cardIndex,b],this.cardIndex+=1},b.prototype.setComment=function(a){return this.cards.hasOwnProperty("COMMENT")||(this.cards.COMMENT=[],this.cardIndex+=1),this.cards.COMMENT.push(a)},b.prototype.setHistory=function(a){return this.cards.hasOwnProperty("HISTORY")||(this.cards.HISTORY=[],this.cardIndex+=1),this.cards.HISTORY.push(a)},b.prototype.contains=function(a){return this.cards.hasOwnProperty(a)},b.prototype.readCard=function(a){var c,d,e,f,g,h,i,j,k,l,m,n,o;i=a.match(b.keywordPattern),k=i.slice(1),g=k[0],j=k[1],j[0]==="'"?(i=j.match(b.stringPattern),i[1]=i[1].trim()):(i=j.match(b.nonStringPattern),i[1]=(l=i[1][0])==="T"||l==="F"?i[1].trim():parseFloat(i[1])),i[2]=i[2].trim(),m=i.slice(1),j=m[0],e=m[1],h=g,n=[!1,void 0],c=n[0],f=n[1],d=/([A-Za-z]+)(\d+)/,i=g.match(d),i!=null&&(h=i[1],o=[!0,i[2]],c=o[0],f=o[1]),this.verifyCard.hasOwnProperty(h)&&(j=this.verifyCard[h](j,c,f));switch(g){case"COMMENT":return this.setComment(j);case"HISTORY":return this.setHistory(j);default:return this.set(g,j,e),this.__defineGetter__(g,function(){return this.cards[g][1]})}},b.prototype.hasDataUnit=function(){return this.NAXIS===0?!1:!0},b}(k),d=function(a){function b(a,b){this.view=a,this.begin=this.current=a.tell()}return q(b,a),b}(k),j=function(a){function b(a,c){var d,e,f,g=this;b.__super__.constructor.apply(this,arguments),f=c.NAXIS,d=c.BITPIX,this.naxis=[],this.rowByteSize=c.NAXIS1*Math.abs(d)/8,this.rowsRead=0,this.min=c["DATAMIN"]!=null?c.DATAMIN:void 0,this.max=c["DATAMAX"]!=null?c.DATAMAX:void 0,e=1;while(e<=f)this.naxis.push(c["NAXIS"+e]),e+=1;this.length=this.naxis.reduce(function(a,b){return a*b})*Math.abs(d)/8,this.data=void 0;switch(d){case 8:this.arrayType=Uint8Array,this.accessor=function(){return g.view.getUint8()};break;case 16:this.arrayType=Int16Array,this.accessor=function(){return g.view.getInt16()};break;case 32:this.arrayType=Int32Array,this.accessor=function(){return g.view.getInt32()};break;case 64:this.arrayType=Int32Array,this.accessor=function(){var a,b,c,d,e;return console.warn("Something funky happens here when dealing with 64 bit integers.  Be wary!!!"),b=Math.abs(g.view.getInt32()),c=Math.abs(g.view.getInt32()),d=b%10,a=d?-1:1,b-=d,e=a*(b<<32|c),e};break;case-32:this.arrayType=Float32Array,this.accessor=function(){return g.view.getFloat32()};break;case-64:this.arrayType=Float64Array,this.accessor=function(){return g.view.getFloat64()};break;default:throw"FITS keyword BITPIX does not conform to one of the following set values [8, 16, 32, 64, -32, -64]"}}return q(b,a),b.prototype.initArray=function(){return this.data=new this.arrayType(this.naxis.reduce(function(a,b){return a*b}))},b.prototype.getRow=function(){var a,b,c;this.current=this.begin+this.rowsRead*this.rowByteSize,b=this.naxis[0],this.view.seek(this.current);for(a=0,c=b-1;0<=c?a<=c:a>=c;0<=c?a++:a--)this.data[b*this.rowsRead+a]=this.accessor();return this.rowsRead+=1},b.prototype.getFrame=function(){var a,b,c;c=[];for(a=0,b=this.naxis[1]-1;0<=b?a<=b:a>=b;0<=b?a++:a--)c.push(this.getRow());return c},b.prototype.getFrameWebGL=function(){var a,b,c,d,e;this.data=new Float32Array(this.naxis.reduce(function(a,b){return a*b})),this.rowsRead=0,c=this.naxis[0];for(b=0,d=this.naxis[1]-1;0<=d?b<=d:b>=d;0<=d?b++:b--){this.current=this.begin+this.rowsRead*this.rowByteSize,this.view.seek(this.current);for(a=0,e=c-1;0<=e?a<=e:a>=e;0<=e?a++:a--)this.data[c*this.rowsRead+a]=this.accessor();this.rowsRead+=1}return this.data},b.prototype.getExtremes=function(){var a,b,c,d,e,f,g,h;if(this.min!=null&&this.max!=null)return[this.min,this.max];b=void 0,d=void 0,c=void 0;for(a=0,f=this.data.length-1;0<=f?a<=f:a>=f;0<=f?a++:a--){e=this.data[a];if(isNaN(e))continue;d=this.data[a],c=this.data[a],b=a;break}for(a=b,g=this.data.length-1;b<=g?a<=g:a>=g;b<=g?a++:a--){e=this.data[a];if(isNaN(e))continue;e<d&&(d=e),e>c&&(c=e)}return h=[d,c],this.min=h[0],this.max=h[1],[this.min,this.max]},b}(d),l=function(a){function b(a,c){var d,e,f,g,h,i=this;b.__super__.constructor.apply(this,arguments),this.rowByteSize=c.NAXIS1,this.rows=c.NAXIS2,this.cols=c.TFIELDS,this.length=this.tableLength=this.rowByteSize*this.rows,this.rowsRead=0,this.accessors=[],g=function(){var a,b,c,d,e;return e=f.slice(1),b=e[0],d=e[1],c=e[2],a=function(){var a;return console.log("blah"),a=i.view.getString(d),i.dataAccessors[b](a)},i.accessors.push(a)};for(e=1,h=c.TFIELDS;1<=h?e<=h:e>=h;1<=h?e++:e--)d=c["TFORM"+e],f=d.match(b.formPattern),g()}return q(b,a),b.formPattern=/([AIFED])(\d+)\.(\d+)/,b.dataAccessors={A:function(a){return a},I:function(a){return parseInt(a)},F:function(a){return parseFloat(a)},E:function(a){return parseFloat(a)},D:function(a){return parseFloat(a)}},b.prototype.getRow=function(){var a,b,c,d;this.current=this.begin+this.rowsRead*this.rowByteSize,this.view.seek(this.current),c=[];for(b=0,d=this.accessors.length-1;0<=d?b<=d:b>=d;0<=d?b++:b--)a=this.accessors[b](),c.push(a);return this.rowsRead+=1,c},b}(d),a=function(a){function b(a,c){var d,e,f,g,h,i,j,k,l,m=this;b.__super__.constructor.apply(this,arguments),this.rowByteSize=c.NAXIS1,this.rows=c.NAXIS2,this.length=this.tableLength=this.rowByteSize*this.rows,this.compressedImage=c.contains("ZIMAGE"),this.rowsRead=0;if(this.compressedImage){this.length+=c.PCOUNT,this.cmptype=c.ZCMPTYPE,this.bitpix=c.ZBITPIX,this.naxis=c.ZNAXIS,this.nx=c.contains("ZTILE1")?parseInt(c.ZTILE1):c.ZNAXIS1,this.bzero=c.contains("BZERO")?c.BZERO:0;if(this.cmptype!=="RICE_1")throw"Compression algorithm not yet implemented.";e=1;for(;;){if(!c.contains("ZNAME"+e))break;h=c["ZNAME"+e],j=c["ZVAL"+e],h==="BLOCKSIZE"?this.blocksize=j:h==="BYTEPIX"&&(this.bytepix=j),e+=1}this.blocksize||(this.blocksize=32),this.bytepix||(this.bytepix=4)}this.fields=parseInt(c.TFIELDS),this.accessors=[];for(e=1,k=this.fields;1<=k?e<=k:e>=k;1<=k?e++:e--)f="TFORM"+e,j=c[f],g=j.match(b.arrayDescriptorPattern),g!=null?function(){var a,c;return c=g[1],a=function(){var a,d,e,f;e=m.view.getInt32(),f=m.view.getInt32(),m.current=m.view.tell(),m.view.seek(m.begin+m.tableLength+f),a=[];for(d=1;1<=e?d<=e:d>=e;1<=e?d++:d--)a.push(b.dataAccessors[c](m.view));return m.view.seek(m.current),a},m.accessors.push(a)}():(g=j.match(b.dataTypePattern),l=g.slice(1),i=l[0],d=l[1],i=i?parseInt(i):0,i===0?function(){var a;return d=g[2],a=function(a){var c;return c=b.dataAccessors[d](m.view),c},m.accessors.push(a)}():function(){var a;return d=g[2],a=function(){var a,c;a=[];for(c=1;1<=i?c<=i:c>=i;1<=i?c++:c--)a.push(b.dataAccessors[d](m.view));return a},m.accessors.push(a)}())}return q(b,a),b.dataTypePattern=/(\d*)([L|X|B|I|J|K|A|E|D|C|M])/,b.arrayDescriptorPattern=/[0,1]*P([L|X|B|I|J|K|A|E|D|C|M])\((\d*)\)/,b.compressedImageKeywords=["ZIMAGE","ZCMPTYPE","ZBITPIX","ZNAXIS"],b.extend(e),b.dataAccessors={L:function(a){var b;return b=a.getInt8()===84?!0:!1,b},X:function(a){throw"Data type not yet implemented"},B:function(a){return a.getUint8()},I:function(a){return a.getInt16()},J:function(a){return a.getInt32()},K:function(a){var b,c,d,e,f;return c=Math.abs(a.getInt32()),d=Math.abs(a.getInt32()),e=c%10,b=e?-1:1,c-=e,f=b*(c<<32|d),console.warn("Something funky happens here when dealing with 64 bit integers.  Be wary!!!"),f},A:function(a){return a.getChar()},E:function(a){return a.getFloat32()},D:function(a){return a.getFloat64()},C:function(a){return[a.getFloat32(),a.getFloat32()]},M:function(a){return[a.getFloat64(),a.getFloat64()]}},b.prototype.getRow=function(){var a,b,c,d;this.current=this.begin+this.rowsRead*this.rowByteSize,this.view.seek(this.current),c=[];for(b=0,d=this.accessors.length-1;0<=d?b<=d:b>=d;0<=d?b++:b--)a=this.accessors[b](),c.push(a);return this.rowsRead+=1,this.compressedImage&&console.log(this.riceDecompressShort(a)),c},b.prototype.riceDecompressShort=function(a){var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q;p=new Uint16Array(this.nx),g=4,h=14,c=1<<g,n=new Array(256),o=8,k=128,i=255;while(i>=0){while(i>=k)n[i]=o,i-=1;k/=2,o-=1}n[0]=0,l=0,d=a.shift(),l|=d<<8,d=a.shift(),l|=d,b=a.shift(),m=8,i=0;while(i<this.nx){m-=g;while(m<0)b=b<<8|a.shift(),m+=8;f=(b>>m)-1,b&=(1<<m)-1,j=i+this.blocksize,j>this.nx&&(j=this.nx);if(f<0)while(i<j)a[i]=l,i++;else if(f===h)while(i<j){k=c-m,e=b<<k,k-=8;while(k>=0)b=a.shift(),e|=b<<k,k-=8;m>0?(b=a.shift(),e|=b>>-k,b&=(1<<m)-1):b=0,(e&1)===0?e>>=1:e=~(e>>1),a[i]=e+l,l=a[i],i++}else while(i<j){while(b===0)m+=8,b=a.shift();o=m-n[b],m-=o+1,b^=1<<m,m-=f;while(m<0)b=b<<8|a.shift(),m+=8;e=o<<f|b>>m,b&=(1<<m)-1,(e&1)===0?e>>=1:e=~(e>>1),p[i]=e+l,l=p[i],i++}}for(i=0,q=p.length-1;0<=q?i<=q:i>=q;0<=q?i++:i--)p[i]=p[i]+this.bzero;return p},b}(d),h=function(){function a(a,b){this.header=a,this.data=b}return a}(),g=function(){function b(a){var b,c,d;this.length=a.byteLength,this.view=new jDataView(a,void 0,void 0,!1),this.hdus=[],this.eof=!1;for(;;){d=this.readHeader(),b=this.readData(d),c=new h(d,b),this.hdus.push(c);if(this.eof)break}}return b.LINEWIDTH=80,b.BLOCKLENGTH=2880,b.BITPIX=[8,16,32,64,-32,-64],b.excessBytes=function(a){return b.BLOCKLENGTH-a%b.BLOCKLENGTH},b.prototype.readHeader=function(){var a,c,d,e;e=0,c=new i;for(;;){d=this.view.getString(b.LINEWIDTH),e+=1,c.readCard(d);if(d.slice(0,4)==="END ")break}return a=b.excessBytes(e*b.LINEWIDTH),this.view.seek(this.view.tell()+a),this.checkEOF(),c},b.prototype.readData=function(c){var d,e;if(!c.hasDataUnit())return;return c.isPrimary()?d=new j(this.view,c):c.isExtension()&&(c.extensionType==="BINTABLE"?d=new a(this.view,c):c.extensionType==="TABLE"&&(d=new l(this.view,c))),e=b.excessBytes(d.length),this.view.seek(this.view.tell()+d.length+e),this.checkEOF(),d},b.prototype.checkEOF=function(){if(this.view.tell()===this.length)return this.eof=!0},b}(),f=this.FITS={},typeof c!="undefined"&&c!==null&&(c.exports=f),f.version="0.0.1",f.File=g,f.Header=i,f.Data=d,f.Image=j,f.Table=l,f.BinTable=a})).call(this)},"fits.decompress":function(a,b,c){((function(){var a;a=this.FITS||b("fits"),a.Decompress={rice:function(a,b,c,d,e,f){var g,h,i,j,k,l,m,n,o,p,q,r,s,t;k=4,l=14,h=1<<k,t=this.riceSetup[d](),k=t[0],l=t[1],p=t[2],r=new Array(256),s=8,o=128,m=255;while(m>=0){while(m>=o)r[m]=s,m-=1;o/=2,s-=1}r[0]=0,g=a.shift(),q=8,m=0;while(m<f){q-=k;while(q<0)g=g<<8|a.shift(),q+=8;j=(g>>q)-1,g&=(1<<q)-1,n=m+c,n>f&&(n=f);if(j<0)while(m<n)a[m]=p,m++;else if(j===l)while(m<n){o=h-q,i=g<<o,o-=8;while(o>=0)g=a.shift(),i|=g<<o,o-=8;q>0?(g=a.shift(),i|=g>>-o,g&=(1<<q)-1):g=0,(i&1)===0?i>>=1:i=~(i>>1),a[m]=i+p,p=a[m],m++}else while(m<n){while(g===0)q+=8,g=a.shift();s=q-r[g],q-=s+1,g^=1<<q,q-=j;while(q<0)g=g<<8|a.shift(),q+=8;i=s<<j|g>>q,g&=(1<<q)-1,(i&1)===0?i>>=1:i=~(i>>1),e[m]=i+p,p=e[m],m++}}return e},riceSetup:{1:function(){var a,b,c;return a=3,b=6,c=array.shift(),[a,b,c]},2:function(){var a,b,c,d;return b=4,c=14,d=0,a=array.shift(),d|=a<<8,a=array.shift(),d|=a,[b,c,d]}},gzip:function(a,b){throw"Not yet implemented"},plio:function(a,b){throw"Not yet implemented"},hcompress:function(a,b){throw"Not yet implemented"}},typeof c!="undefined"&&c!==null&&(c.exports=a.Decompress)})).call(this)},"fits.header.verify":function(a,b,c){((function(){var a,b=Array.prototype.slice;a={primary:!1,extension:!1,isPrimary:function(){return this.primary},isExtension:function(){return this.extension},verifyOrder:function(a,b){if(b!==this.cardIndex)return console.warn(""+a+" should appear at index "+b+" in the FITS header")},verifyBetween:function(a,b,c,d){if(!(b>=c&&b<=d))throw"The "+a+" value of "+b+" is not between "+c+" and "+d},verifyInteger:function(a,b){var c;c=parseInt(b);if(c!==b)throw"The "+a+" value of "+b+" is not an integer";return c},Functions:{SIMPLE:function(){var a,c;return a=1<=arguments.length?b.call(arguments,0):[],c=arguments[0],this.primary=!0,this.verifyOrder("SIMPLE",0),c==="T"?!0:!1},XTENSION:function(){var a,c;return a=1<=arguments.length?b.call(arguments,0):[],c=arguments[0],this.extension=!0,this.extensionType=c,this.verifyOrder("XTENSION",0),c},BITPIX:function(){var a,c,d;a=1<=arguments.length?b.call(arguments,0):[],c="BITPIX",d=this.verifyInteger(c,arguments[0]),this.verifyOrder(c,1);if(d!==8&&d!==16&&d!==32&&d!==64&&d!==-32&&d!==-64)throw""+c+" value "+d+" is not permitted";return parseInt(d)},NAXIS:function(){var a,c,d,e,f,g;a=1<=arguments.length?b.call(arguments,0):[],d="NAXIS",f=arguments[0],c=arguments[1],f=this.verifyInteger(d,f);if(!c){this.verifyOrder(d,2),this.verifyBetween(d,f,0,999);if(this.isExtension())if((g=this.extensionType)==="TABLE"||g==="BINTABLE"){e=2;if(f!==e)throw""+d+" must be "+e+" for TABLE and BINTABLE extensions"}}return f},PCOUNT:function(){var a,c,d,e,f,g;a=1<=arguments.length?b.call(arguments,0):[],c="PCOUNT",f=this.verifyInteger(c,arguments[0]),d=3+this.NAXIS,this.verifyOrder(c,d);if(this.isExtension())if((g=this.extensionType)==="IMAGE"||g==="TABLE"){e=0;if(f!==e)throw""+c+" must be "+e+" for the "+this.extensionType+" extensions"}return f},GCOUNT:function(){var a,c,d,e,f,g;a=1<=arguments.length?b.call(arguments,0):[],c="GCOUNT",f=this.verifyInteger(c,arguments[0]),d=3+this.NAXIS+1,this.verifyOrder(c,d);if(this.isExtension())if((g=this.extensionType)==="IMAGE"||g==="TABLE"||g==="BINTABLE"){e=1;if(f!==e)throw""+c+" must be "+e+" for the "+this.extensionType+" extensions"}return f},DATE:function(){var a,c,d;return a=1<=arguments.length?b.call(arguments,0):[],c="DATE",d=new Date(d),d},EXTEND:function(){var a,c,d;a=1<=arguments.length?b.call(arguments,0):[],c="EXTEND",d=arguments[0];if(!this.isPrimary())throw""+c+" must only appear in the primary header";return d==="T"?!0:!1},BSCALE:function(){var a;return a=1<=arguments.length?b.call(arguments,0):[],parseFloat(arguments[0])},BZERO:function(){var a;return a=1<=arguments.length?b.call(arguments,0):[],parseFloat(arguments[0])},BLANK:function(){var a,c,d;a=1<=arguments.length?b.call(arguments,0):[],c="BLANK",d=arguments[0];if(this.BIXPIX>0)return this.verifyInteger(d);throw""+c+" is not to be used for BITPIX = "+this.BITPIX},DATAMAX:function(){var a;return a=1<=arguments.length?b.call(arguments,0):[],parseFloat(arguments[0])},DATAMAX:function(){var a;return a=1<=arguments.length?b.call(arguments,0):[],parseFloat(arguments[0])},EXTVER:function(){var a,c;return a=1<=arguments.length?b.call(arguments,0):[],key("EXTVER"),c=arguments[0],c=this.verifyInteger(key,c),c},EXTLEVEL:function(){var a,c,d;return a=1<=arguments.length?b.call(arguments,0):[],c="EXTLEVEL",d=arguments[0],d=this.verifyInteger(c,d),d},TFIELDS:function(){var a,c,d;return a=1<=arguments.length?b.call(arguments,0):[],c="TFIELDS",d=arguments[0],d=this.verifyInteger(c,d),this.verifyBetween(c,d,0,999),d},TBCOL:function(){var a,c,d,e;return a=1<=arguments.length?b.call(arguments,0):[],d="TBCOL",e=arguments[0],c=arguments[2],this.verifyBetween(d,c,0,this.TFIELDS)},ZIMAGE:function(){var a,c,d;return a=1<=arguments.length?b.call(arguments,0):[],c="ZIMAGE",d=arguments[0],d==="T"?!0:!1},ZCMPTYPE:function(){var a,c,d;a=1<=arguments.length?b.call(arguments,0):[],c="ZCMPTYPE",d=arguments[0];if(d!=="GZIP_1"&&d!=="RICE_1"&&d!=="PLIO_1"&&d!=="HCOMPRESS_1")throw""+c+" value "+d+" is not permitted";if(d!=="RICE_1")throw"Compress type "+d+" is not yet implement";return d},ZBITPIX:function(){var a,c,d;a=1<=arguments.length?b.call(arguments,0):[],c="ZBITPIX",d=this.verifyInteger(c,arguments[0]);if(d!==8&&d!==16&&d!==32&&d!==64&&d!==-32&&d!==-64)throw""+c+" value "+d+" is not permitted";return parseInt(d)},ZNAXIS:function(){var a,c,d,e;return a=1<=arguments.length?b.call(arguments,0):[],d="ZNAXIS",e=arguments[0],c=arguments[1],e=this.verifyInteger(d,e),c||this.verifyBetween(d,e,0,999),e},ZTILE:function(){var a,c,d;return a=1<=arguments.length?b.call(arguments,0):[],c="ZTILE",d=this.verifyInteger(c,arguments[0]),d},ZSIMPLE:function(){var a;return a=1<=arguments.length?b.call(arguments,0):[],arguments[0]==="T"?!0:!1},ZPCOUNT:function(){var a,c,d;return a=1<=arguments.length?b.call(arguments,0):[],c="ZPCOUNT",d=arguments[0],this.verifyInteger(c,d)},ZGCOUNT:function(){var a,c,d;return a=1<=arguments.length?b.call(arguments,0):[],c="ZGCOUNT",d=arguments[0],this.verifyInteger(c,d)}}},c.exports=a})).call(this)},"fits.image":function(a,b,c){((function(){})).call(this)},"fits.images":function(a,b,c){((function(){var a;a=this.FITS||b("fits"),a.Images=function(){function a(){this.images={},this.keys=[],this.minimum=void 0,this.maximum=void 0,this.count=0}return a.prototype.getExtremes=function(){var a,b,c,d,e,f;e=[],d=[],f=this.images;for(c in f)b=f[c],b.hdus[0].data.getFrameWebGL(),a=b.hdus[0].data.getExtremes(),e.push(a[0]),d.push(a[1]);return this.minimum=Math.min.apply(Math,e),this.maximum=Math.max.apply(Math,d)},a.prototype.addImage=function(a){var b;return b=a.hdus[0].header.FILTER,this.keys.push(b),this.images[b]=a,this.count+=1,this.__defineGetter__(b,function(){return this.images[b]})},a.prototype.getWidth=function(){var a;return a=this.keys[0],this.images[a]==null?null:this.images[a].hdus[0].header.NAXIS1},a.prototype.getHeight=function(){var a;return a=this.keys[0],this.images[a]==null?null:this.images[a].hdus[0].header.NAXIS2},a.prototype.getCount=function(){return this.count},a.prototype.getData=function(a){return this[a].hdus[0].data.data},a}(),c.exports=a.Images})).call(this)}})